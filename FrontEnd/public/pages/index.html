<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>E-commerce JSC</title>
  <link rel="stylesheet" href="../css/styles.css">
</head>

<body>

  <!-- Navegación -->
  <header>
    <div class="nav-container">
      <div class="logo">Mi E-Commerce</div>
      <div class="nav-buttons">
        <button id="btnTienda">Tienda</button>
        <button id="btnAdmin">Panel Admin</button>
        <button id="btnCarrito" class="cart-icon">
          🛒 Carrito
          <span class="cart-count" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Sección Tienda -->
  <div id="tienda" class="container">
    <h2>Catálogo de Productos</h2>

    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Buscar productos...">
      <button id="searchButton">Buscar</button>
    </div>

    <div class="filters">
      <select id="filterCategoria">
        <option value="">Todas las categorías</option>
      </select>
      <select id="filterMarca">
        <option value="">Todas las marcas</option>
      </select>
      <select id="sortBy">
        <option value="default">Ordenar por</option>
        <option value="price-asc">Precio: Menor a Mayor</option>
        <option value="price-desc">Precio: Mayor a Menor</option>
        <option value="name-asc">Nombre: A-Z</option>
        <option value="name-desc">Nombre: Z-A</option>
      </select>
    </div>

    <div class="products" id="productList">
      <!-- Aquí se cargarán los productos -->
    </div>
  </div>

  <!-- Sección Carrito -->
  <div id="cartSection" class="cart hidden">
    <h3>Carrito de Compra</h3>
    <div id="emptyCart" class="cart-empty">
      El carrito está vacío
    </div>
    <table id="cartTable" class="hidden">
      <thead>
        <tr>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Subtotal</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody>
        <!-- Items del carrito -->
      </tbody>
    </table>
    <p class="cart-total" id="cartTotal">Total: $0</p>
    <div class="cart-actions hidden" id="cartActions">
      <button id="btnEmptyCart" class="btn btn-danger">Vaciar Carrito</button>
      <button id="btnCheckout" class="btn btn-success">Proceder al Pago</button>
    </div>
  </div>

  <!-- Sección Checkout -->
<!--  <div id="checkoutSection" class="hidden">-->
<!--    <h2>Completar Compra</h2>-->

<!--    <div class="client-selector">-->
<!--      <h3>Seleccionar Cliente</h3>-->
<!--      <select id="clientSelect">-->
<!--        <option value="">Seleccione un cliente</option>-->
<!--      </select>-->
<!--      <button id="btnNewClient" class="btn">Cliente Nuevo</button>-->
<!--    </div>-->

<!--    <div id="newClientForm" class="hidden">-->
<!--      <h3>Datos del Cliente</h3>-->
<!--      <form id="checkoutClientForm">-->
<!--        &lt;!&ndash;  Este ID no se usaba en el JS, pero es buena práctica tenerlo &ndash;&gt;-->
<!--        <div class="form-row">-->
<!--          <div>-->
<!--            <label for="checkoutNombre">Nombre</label>-->
<!--            <input type="text" id="checkoutNombre" required>-->
<!--          </div>-->
<!--          <div>-->
<!--            <label for="checkoutTelefono">Teléfono</label>-->
<!--            <input type="text" id="checkoutTelefono" required>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div>-->
<!--          <label for="checkoutDireccion">Dirección</label>-->
<!--          <input type="text" id="checkoutDireccion" required>-->
<!--        </div>-->
<!--        <button id="btnConfirmClientData" class="btn hidden">Confirmar Datos</button>-->
<!--      </form>-->
<!--    </div>-->

<!--    <div class="cart" id="checkoutCartSection">-->
<!--      <h3>Resumen del Pedido</h3>-->
<!--      <table id="checkoutCartTable">-->
<!--        <thead>-->
<!--          <tr>-->
<!--            <th>Producto</th>-->
<!--            <th>Cantidad</th>-->
<!--            <th>Precio</th>-->
<!--            <th>Subtotal</th>-->
<!--          </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--          &lt;!&ndash; Items del carrito &ndash;&gt;-->
<!--        </tbody>-->
<!--      </table>-->
<!--      <p class="cart-total" id="checkoutTotal">Total: $0</p>-->
<!--      <div class="cart-actions">-->
<!--        <button id="btnCancelCheckout" class="btn btn-danger">Cancelar</button>-->
<!--        <button id="btnConfirmCheckout" class="btn btn-success">Confirmar Compra</button>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
  <!-- Sección Checkout -->
<div id="checkoutSection" class="hidden">
  <h2>Completar Compra</h2>

  <div id="newClientForm">  <!--  Simplificado:  Siempre visible en checkout -->
    <h3>Datos del Cliente</h3>
    <form id="checkoutClientForm">
      <div class="form-row">
        <div>
          <label for="checkoutNombre">Nombre</label>
          <input type="text" id="checkoutNombre" required>
        </div>
        <div>
          <label for="checkoutTelefono">Teléfono</label>
          <input type="text" id="checkoutTelefono" required>
        </div>
      </div>
      <div>
        <label for="checkoutDireccion">Dirección</label>
        <input type="text" id="checkoutDireccion" required>
      </div>
      <!--  El botón "Confirmar Datos" ya no es necesario aquí -->
    </form>
  </div>

  <div class="cart" id="checkoutCartSection">
    <h3>Resumen del Pedido</h3>
    <table id="checkoutCartTable">
      <thead>
        <tr>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        <!-- Items del carrito -->
      </tbody>
    </table>
    <p class="cart-total" id="checkoutTotal">Total: $0</p>
    <div class="cart-actions">
      <button id="btnCancelCheckout" class="btn btn-danger">Cancelar</button>
      <button id="btnConfirmCheckout" class="btn btn-success">Confirmar Compra</button>
    </div>
  </div>
</div>

<!--  Resto del HTML (sin cambios) -->

  <!-- Sección Factura -->
  <div id="invoiceSection" class="hidden">
    <div class="invoice">
      <span class="invoice-close" id="btnCloseInvoice">×</span>
      <div id="invoiceDetails">
        <!-- Se mostrará la factura generada -->
      </div>
    </div>
  </div>


  <!-- Sección Administrador -->
  <div id="admin" class="container hidden">
    <h2>Panel Administrador</h2>

    <div class="admin-tabs">
      <div class="admin-tab active" data-tab="categorias">Categorías</div>
      <div class="admin-tab" data-tab="marcas">Marcas</div>
      <div class="admin-tab" data-tab="proveedores">Proveedores</div>
      <div class="admin-tab" data-tab="clientes">Clientes</div>
      <div class="admin-tab" data-tab="productos">Productos</div>
      <div class="admin-tab" data-tab="ventas">Historial de Ventas</div>
    </div>

    <div class="admin-panel">
      <!-- Administrar Categorías -->
      <div class="admin-section" id="adminCategorias">
        <h3>Gestión de Categorías</h3>
        <form id="formCategoria">
          <input type="hidden" id="categoriaId">
          <div>
            <label for="categoriaNombre">Nombre de Categoría</label>
            <input type="text" id="categoriaNombre" placeholder="Nombre de Categoría" required>
          </div>
          <div class="form-actions">
            <button type="button" id="resetCategoriaForm" class="btn btn-danger">Cancelar</button>
            <button type="submit" class="btn btn-success">Guardar Categoría</button>
          </div>
        </form>
        <table id="tablaCategorias">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Lista de categorías -->
          </tbody>
        </table>
      </div>

      <!-- Administrar Marcas -->
      <div class="admin-section hidden" id="adminMarcas">
        <h3>Gestión de Marcas</h3>
        <form id="formMarca">
          <input type="hidden" id="marcaId">
          <div>
            <label for="marcaNombre">Nombre de Marca</label>
            <input type="text" id="marcaNombre" placeholder="Nombre de Marca" required>
          </div>
          <div class="form-actions">
            <button type="button" id="resetMarcaForm" class="btn btn-danger">Cancelar</button>
            <button type="submit" class="btn btn-success">Guardar Marca</button>
          </div>
        </form>
        <table id="tablaMarcas">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Lista de marcas -->
          </tbody>
        </table>
      </div>

      <!-- Administrar Proveedores -->
      <div class="admin-section hidden" id="adminProveedores">
        <h3>Gestión de Proveedores</h3>
        <form id="formProveedor">
          <input type="hidden" id="proveedorId">
          <div>
            <label for="proveedorNombre">Nombre</label>
            <input type="text" id="proveedorNombre" placeholder="Nombre Completo" required>
          </div>
          <div>
            <label for="proveedorTelefono">Teléfono</label>
            <input type="text" id="proveedorTelefono" placeholder="Teléfono de contacto">
          </div>
          <div>
            <label for="proveedorContacto">Dirección</label>
            <input type="text" id="proveedorContacto" placeholder="Dirección Completa" required>
          </div>
          <div class="form-actions">
            <button type="button" id="resetProveedorForm" class="btn btn-danger">Cancelar</button>
            <button type="submit" class="btn btn-success">Guardar Proveedor</button>
          </div>
        </form>
        <table id="tablaProveedores">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Teléfono</th>
              <th>Dirección</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Lista de proveedores -->
          </tbody>
        </table>
      </div>

      <!-- Administrar Clientes -->
      <div class="admin-section hidden" id="adminClientes">
        <h3>Gestión de Clientes</h3>
        <form id="formCliente">
          <input type="hidden" id="clienteId">
          <div>
            <label for="clienteNombre">Nombre</label>
            <input type="text" id="clienteNombre" placeholder="Nombre completo" required>
          </div>
          <div>
            <label for="clienteTelefono">Teléfono</label>
            <input type="text" id="clienteTelefono" placeholder="Teléfono de contacto">
          </div>
          <div>
            <label for="clienteDireccion">Dirección</label>
            <input type="text" id="clienteDireccion" placeholder="Dirección completa" required>
          </div>

          <div class="form-actions">
            <button type="button" id="resetClienteForm" class="btn btn-danger">Cancelar</button>
            <button type="submit" class="btn btn-success">Guardar Cliente</button>
          </div>
        </form>
        <table id="tablaClientes">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Teléfono</th>
              <th>Dirección</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Lista de clientes -->
          </tbody>
        </table>
      </div>

      <!-- Administrar Productos -->
      <div class="admin-section hidden" id="adminProductos">
        <h3>Gestión de Productos</h3>
        <form id="formProducto">
          <input type="hidden" id="productoId">
          <div class="form-row">
            <div>
              <label for="productoNombre">Nombre del Producto *</label>
              <input type="text" id="productoNombre" placeholder="Nombre del Producto" required>
            </div>
            <div>
              <label for="productoPrecio">Precio *</label>
              <input type="number" id="productoPrecio" placeholder="Precio" step="0.01" min="0" required>
            </div>
          </div>
          <div class="form-row">
            <div>
              <label for="productoCategoria">Categoría *</label>
              <select id="productoCategoria" required>
                <option value="">Seleccione Categoría</option>
              </select>
            </div>
            <div>
              <label for="productoMarca">Marca *</label>
              <select id="productoMarca" required>
                <option value="">Seleccione Marca</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div>
              <label for="productoProveedor">Proveedor *</label>
              <select id="productoProveedor" required>
                <option value="">Seleccione Proveedor</option>
              </select>
            </div>
            <div>
              <label for="productoStock">Stock *</label>
              <input type="number" id="productoStock" placeholder="Cantidad en stock" min="0" required>
            </div>
          </div>
          <div>
            <label for="productoPVP">PVP *</label>
            <input type="number" id="productoPVP" placeholder="PVP" step="0.01" min="0" required>
          </div>
          <div>
            <label for="productoDescripcion">Descripción</label>
            <textarea id="productoDescripcion" placeholder="Descripción del producto"></textarea>
          </div>
          <div>
            <label for="productoImagen">URL de Imagen</label>
            <input type="text" id="productoImagen" placeholder="URL de la imagen">
          </div>
          <div class="form-actions">
            <button type="button" id="resetProductoForm" class="btn btn-danger">Cancelar</button>
            <button type="submit" class="btn btn-success">Guardar Producto</button>
          </div>
        </form>
        <table id="tablaProductos">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Categoría</th>
              <th>Marca</th>
              <th>Precio</th>
              <th>Proveedor</th>
              <th>Stock</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Lista de productos -->
          </tbody>
        </table>
      </div>

      <!-- Historial de Ventas -->
      <div class="admin-section hidden" id="adminVentas">
        <h3>Historial de Ventas</h3>
        <table id="tablaVentas">
          <thead>
            <tr>
              <th>Factura #</th>
              <th>Fecha</th>
              <th>Cliente</th>
              <th>Total</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Lista de ventas -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
    <script type="module" src="../ui/ui.js"></script>
</body>
</html>